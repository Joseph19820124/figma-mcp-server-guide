# Figma MCP 服务器完整指南

## 目录
1. [介绍](#介绍)
2. [什么是Figma MCP服务器？](#什么是figma-mcp服务器)
3. [先决条件和要求](#先决条件和要求)
4. [价格和计划](#价格和计划)
5. [安装和设置](#安装和设置)
6. [不同IDE的配置](#不同ide的配置)
7. [使用和最佳实践](#使用和最佳实践)
8. [故障排除](#故障排除)
9. [替代方案](#替代方案)
10. [常见问题](#常见问题)

---

## 介绍

Figma的开发模式MCP服务器代表了设计到开发工作流程的重大飞跃。这个测试版工具通过为AI驱动的开发工具提供对Figma设计数据的直接访问，弥合了设计和代码之间的差距。

模型上下文协议(MCP)是一个开放标准，允许AI应用程序连接到各种数据源和工具。Figma对这个协议的实现使开发者能够将设计上下文直接带入他们的编码环境，从而实现更准确和高效的代码生成。

---

## 什么是Figma MCP服务器？

### 核心功能
Figma开发模式MCP服务器是一个在您的计算机上运行的本地服务器，为AI编码工具提供：

- **设计规范**: 精确的尺寸、颜色、排版和间距访问
- **组件信息**: 设计组件、其属性和变体的详细信息
- **设计变量**: 对设计令牌、配色方案和文本样式的访问
- **布局数据**: 定位、约束和响应式行为的信息
- **资源信息**: 图像、图标和其他设计资源的详细信息

### 工作原理
1. **本地服务器**: 在`http://127.0.0.1:3845/sse`本地运行
2. **MCP协议**: 使用与AI工具的标准化通信
3. **实时访问**: 提供来自您Figma设计的实时数据
4. **选择性上下文**: 允许配置要共享的信息

---

## 先决条件和要求

### 账户要求
- **Figma账户**: Professional、Organization或Enterprise计划
- **座位类型**: 需要Dev或Full座位
- **桌面应用**: 必须使用Figma桌面应用程序（不支持网页版本）

### 技术要求
- **操作系统**: Windows、macOS或Linux
- **开发环境**: 
  - 带有GitHub Copilot的VS Code
  - Cursor
  - Windsurf
  - Claude Code
  - Zed（支持MCP）
- **API访问**: 具有适当权限的Figma API访问令牌

### 所需技能
- 对开发工作流程的基本理解
- 熟悉您选择的IDE
- 对JSON配置的基本知识
- 对API令牌和安全性的理解

---

## 价格和计划

### 官方Figma计划

#### Professional计划
- **费用**: 约15美元/编辑者/月，约15美元/开发者/月
- **开发模式访问**: ✅ 可用
- **功能**: 
  - 完整的设计和开发模式访问
  - 编辑者和开发者座位之间无区别
  - 包含所有开发模式功能
  - 包含MCP服务器访问

#### Organization计划  
- **费用**: 约45美元/编辑者/月，开发者座位价格可变
- **开发模式访问**: ✅ 提供专用开发者座位
- **功能**:
  - 仅开发者座位的单独定价
  - 高级协作功能
  - 组织级控制
  - 优先支持

#### Enterprise计划
- **费用**: 自定义定价，开发者座位约35美元/月
- **开发模式访问**: ✅ 提供增强功能
- **功能**:
  - 专用开发者座位35美元/月
  - 高级安全和治理
  - 自定义集成
  - 白手套支持

### 成本考虑

#### 小团队（1-5名开发者）
- **Professional计划**: 最具成本效益的选择
- **总成本**: 团队访问费用75-225美元/月
- **建议**: 从Professional计划开始

#### 中等团队（5-20名开发者）
- **Organization计划**: 更好的开发者座位定价
- **总成本**: 根据组合200-800美元/月
- **建议**: 考虑Organization计划以节省开发者座位费用

#### 大团队（20+名开发者）
- **Enterprise计划**: 批量折扣和专用开发者座位
- **总成本**: 根据使用情况可协商
- **建议**: 带有专用开发者座位的Enterprise计划

### 免费替代方案
- **社区MCP服务器**: 免费但需要技术设置
- **第三方解决方案**: 各种定价模式可用
- **API直接访问**: 有限制的免费层可用

---

## 安装和设置

### 步骤1: 在Figma中启用开发模式MCP服务器

1. **下载Figma桌面应用**
   - 访问 [figma.com/downloads](https://www.figma.com/downloads)
   - 下载并安装桌面应用程序
   - 使用您的Figma账户登录

2. **启用MCP服务器**
   - 打开Figma桌面
   - 转到 **帮助和账户** > **首选项**
   - 找到 **开发模式** 部分
   - 切换 **启用开发模式MCP服务器**
   - 记录服务器地址: `http://127.0.0.1:3845/sse`

### 步骤2: 生成Figma API令牌（用于第三方服务器）

1. **访问账户设置**
   - 转到 [figma.com/settings](https://www.figma.com/settings)
   - 导航到 **安全** 选项卡

2. **创建访问令牌**
   - 点击 **创建新令牌**
   - 为您的令牌命名（例如，"MCP服务器令牌"）
   - 选择权限:
     - **文件内容**: 读取访问
     - **开发资源**: 读取访问
     - **评论**: 无访问（推荐）
     - **团队库**: 读取访问（如果需要）

3. **安全保存令牌**
   - 立即复制令牌（仅显示一次）
   - 存储在安全位置（推荐密码管理器）
   - 永远不要将令牌提交到版本控制

---

## 不同IDE的配置

### Cursor配置

#### 方法1: 官方Figma MCP服务器
1. **打开Cursor设置**
   - `Cursor` > `设置` > `Cursor设置`
   - 导航到 **MCP** 选项卡

2. **添加服务器**
   - 点击 **+ 添加新的全局MCP服务器**
   - **名称**: `Figma Dev Mode MCP`
   - **类型**: `sse`
   - **URL**: `http://127.0.0.1:3845/sse`

3. **启用代理模式**
   - 打开聊天工具栏 (`⌥⌘B`)
   - 切换到 **代理模式**
   - 在工具中查找 **MCP服务器: Figma Dev Mode MCP**

#### 方法2: 社区MCP服务器
```json
{
  "mcpServers": {
    "Figma": {
      "command": "npx",
      "args": ["-y", "figma-developer-mcp", "--figma-api-key=YOUR_TOKEN", "--stdio"]
    }
  }
}
```

### VS Code配置

1. **先决条件**
   - 安装GitHub Copilot扩展
   - 启用GitHub Copilot聊天

2. **设置配置**
   - 打开 **命令面板** (`Cmd/Ctrl + Shift + P`)
   - 搜索 "MCP"
   - 选择 **在settings.json中编辑**

3. **添加配置**
```json
{
  "chat.mcp.discovery.enabled": true,
  "mcp": {
    "servers": {
      "Figma Dev Mode MCP": {
        "type": "sse",
        "url": "http://127.0.0.1:3845/sse"
      }
    }
  },
  "chat.agent.enabled": true
}
```

### Windsurf配置

1. **打开设置**
   - `Windsurf` > `设置` > `Windsurf设置`
   - 或使用快捷键 `⌘ ,`

2. **安装插件**
   - 导航到 **Cascade设置**
   - 选择 **打开插件商店**
   - 搜索 "Figma"
   - 安装Figma插件

3. **配置注意事项**
   - 在配置中将`url`属性更改为`serverUrl`
   - 这防止常见的配置错误

### Claude Code配置

Claude Code原生支持MCP，会自动检测您本地机器上运行的MCP服务器。

1. **安装Claude Code**
   - 按照Anthropic的安装说明
   - 确保启用MCP支持

2. **自动检测**
   - Claude Code会自动检测Figma MCP服务器
   - 无需手动配置

---

## 使用和最佳实践

### 入门指南

#### 基本工作流程
1. **在Figma中打开您的设计**
   - 使用Figma桌面应用（必需）
   - 确保MCP服务器正在运行

2. **启动您的IDE**
   - 打开支持MCP的首选IDE
   - 激活代理/AI模式

3. **引用您的设计**
   - 复制Figma框架/组件URL
   - 粘贴到AI聊天中
   - 请求实现

#### 示例提示
```
"使用Figma MCP，实现这个设计: [Figma URL]"

"分析[Figma URL]的设计并创建一个React组件"

"为这个Figma框架中显示的布局生成CSS: [URL]"

"从这个Figma文件中提取设计令牌: [URL]"
```

### 最佳实践

#### 设计准备
1. **组织您的设计**
   - 使用清晰的命名约定
   - 将相关元素分组
   - 创建一致的组件结构

2. **准备组件**
   - 如有问题，分离实例
   - 尽可能使用框架而不是组
   - 确保适当的图层层次结构

3. **设计系统对齐**
   - 使用一致的变量和样式
   - 将设计令牌与代码令牌对齐
   - 记录组件使用模式

#### 开发工作流程
1. **迭代方法**
   - 从基本布局开始
   - 在迭代中完善细节
   - 测试不同屏幕尺寸

2. **上下文管理**
   - 提供清晰、具体的提示
   - 包含相关的代码库上下文
   - 指定框架和样式偏好

3. **质量控制**
   - 彻底审查生成的代码
   - 测试响应式行为
   - 验证可访问性功能

### 高级使用

#### 自定义配置
- 调整MCP服务器设置以满足特定上下文需求
- 配置特定于IDE的偏好
- 设置特定于项目的工作流程

#### 与设计系统集成
- 将Figma变量映射到代码令牌
- 自动化组件库更新
- 同步设计更改与代码仓库

---

## 故障排除

### 常见问题

#### 服务器连接问题
**问题**: MCP客户端无法连接到Figma服务器
**解决方案**:
- 确保Figma桌面正在运行
- 验证MCP服务器在首选项中已启用
- 检查防火墙是否阻止端口3845
- 重启Figma桌面应用

#### 身份验证错误
**问题**: API令牌身份验证失败
**解决方案**:
- 验证令牌具有正确权限
- 检查令牌是否未过期
- 确保令牌配置正确
- 如有必要，重新生成令牌

#### 组件读取问题
**问题**: MCP服务器无法读取某些组件
**解决方案**:
- 分离组件实例
- 将组转换为框架
- 简化复杂的嵌套结构
- 检查损坏的设计元素

#### IDE配置问题
**问题**: IDE无法识别MCP服务器
**解决方案**:
- 验证IDE支持MCP协议
- 检查配置文件语法
- 配置更改后重启IDE
- 如有必要，清除IDE缓存

### 性能优化

1. **减少上下文大小**
   - 限制设计查询范围
   - 使用特定框架引用
   - 避免查询整个大文件

2. **网络优化**
   - 确保稳定的互联网连接
   - 可用时使用本地缓存
   - 最小化并发请求

3. **资源管理**
   - 关闭未使用的Figma文件
   - 定期重启服务器
   - 监控系统资源

---

## 替代方案

### 社区解决方案

#### GLips的Figma-Context-MCP
- **仓库**: [GitHub](https://github.com/GLips/Figma-Context-MCP)
- **功能**: 简化上下文以提高准确性
- **费用**: 免费
- **设置**: 需要手动配置

#### TimHolden的Figma-MCP-Server
- **仓库**: [GitHub](https://github.com/TimHolden/figma-mcp-server)
- **功能**: 完整的TypeScript实现
- **费用**: 免费
- **设置**: 高级配置选项

### 第三方解决方案

#### Builder.io
- **功能**: 高级设计到代码工作流程
- **费用**: 带有免费层的付费服务
- **集成**: 直接Figma集成

#### Anima
- **功能**: 设计到代码自动化
- **费用**: 基于订阅
- **集成**: Figma插件

#### Locofy
- **功能**: React/React Native代码生成
- **费用**: 免费增值模式
- **集成**: 从Figma直接导出

---

## 常见问题

### 一般问题

**问: Figma MCP服务器是免费的吗？**
答: MCP服务器本身包含在付费Figma计划中，但您需要带有Dev或Full座位的Professional、Organization或Enterprise计划。

**问: 我可以在免费Figma计划中使用它吗？**
答: 不可以，开发模式和MCP服务器访问需要付费计划。

**问: 它可以在浏览器中与Figma一起使用吗？**
答: 不可以，您必须使用Figma桌面应用程序。

### 技术问题

**问: 支持哪些IDE？**
答: 目前支持Cursor、VS Code（带Copilot）、Windsurf、Claude Code和Zed。

**问: 我可以将它用于多个项目吗？**
答: 是的，服务器可以访问您有权查看的任何Figma文件。

**问: 我的设计数据安全吗？**
答: 是的，服务器在本地运行，仅与您配置的MCP客户端共享数据。

### 定价问题

**问: 对于开发者来说，最具成本效益的计划是什么？**
答: 对于小团队，Professional计划通常最具成本效益。对于大团队，带有专用开发者座位（35美元/月）的Enterprise计划可能更好。

**问: 有隐藏费用吗？**
答: 没有隐藏费用，但您可能需要考虑IDE订阅（如VS Code的GitHub Copilot）。

**问: 我可以免费试用吗？**
答: Figma为付费计划提供试用，您可以免费使用带有API令牌的社区MCP服务器。

---

*本指南由社区维护并定期更新。如需最新信息，请始终参考Figma的官方文档。*